{
  "comments": [
    {
      "key": {
        "uuid": "ebc421c3_6ab628b8",
        "filename": "jjb/integration/common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 5,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T16:11:12Z",
      "side": 1,
      "message": "So this is the reason why I think crafting the common-functions.sh script, same we do with other scripts that run in controller and other VMs is more convenient: you do not need to pass global variables, they get automatically replaced by the value when you create the file in that way.",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7a4df8b_1e282050",
        "filename": "jjb/integration/common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 2264
      },
      "writtenOn": "2018-02-01T22:56:07Z",
      "side": 1,
      "message": "this is just for debug/information purposes right?",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1834659e_8e5b6f16",
        "filename": "jjb/integration/common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 35,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:50:19Z",
      "side": 1,
      "message": "yeah for now, but we could keep it so that we know what the values are. Currently somewhere there is a set -x enabled so the lines are dumped to the console, but this ensures we will see the vars regardless.",
      "parentUuid": "d7a4df8b_1e282050",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6f50764_6af5356e",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 2264
      },
      "writtenOn": "2018-02-01T22:56:07Z",
      "side": 1,
      "message": "I don\u0027t think we should be considering anything ODL or OPENSTACK here.\nmaybe just blindly copy this script to all nodes that come up.\n\nwe may have a lot of things down the road that is common bash that we want to be\navailable to use on all of the nodes.",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ae5672c_2197cb20",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:50:19Z",
      "side": 1,
      "message": "yes, had same thought. just copy to all nodes. This was easy to add and verify here since we only use these funcs in the controller.",
      "parentUuid": "b6f50764_6af5356e",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c9f7128_08a4efcd",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T16:11:12Z",
      "side": 1,
      "message": "This part I do not get very well: is this script what is copied to /tmp/common-functions.sh in Jenkins robot VM? should not be the other script common-functions.sh?",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cab55848_b271f3c9",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:50:19Z",
      "side": 1,
      "message": "This is the key to how we know to copy the script or not. the copy script is prepended to the common-functions.sh file by jenkins. BASH_SOURCE[0] is the name of the program, so it will be common-functions.sh if executed or it will be bash if sourced. The builder executes it, so that goes down the copy path. The other .sh files source the file, so they hit this check, ignore it and go on to actually source common-functions.sh.",
      "parentUuid": "1c9f7128_08a4efcd",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "41f678b0_89f6e07b",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T20:03:46Z",
      "side": 1,
      "message": "OK, prepend means the 2 scripts will be executed like 1 and BASH_SOURCE[0] will be name of the second script. Clear now, thanks for clarifying.",
      "parentUuid": "cab55848_b271f3c9",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c32d3d4b_b70d1ec4",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T22:09:51Z",
      "side": 1,
      "message": "The name is actually some random thing that jenkins comes up with, like random.sh. that\u0027s the way the script var works in the builders. jenkins just cat\u0027s them all together in the oeder listed in the builder and then assigns a random name to it like xxxx.sh. And then it executes the script. When executed bash_source[0] will have that name and when sourced it will have bash in the var.",
      "parentUuid": "41f678b0_89f6e07b",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "63936408_66f0b18d",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T22:30:12Z",
      "side": 1,
      "message": "This is really ingenious, did you just come up with this or you used this idea before?",
      "parentUuid": "c32d3d4b_b70d1ec4",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9c51b13_09085a4e",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 4,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T22:38:52Z",
      "side": 1,
      "message": "Thanh gets credit and provided the stackexchange link",
      "parentUuid": "63936408_66f0b18d",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08319216_f7c4094f",
        "filename": "jjb/integration/copy-common-functions.sh",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T16:11:12Z",
      "side": 1,
      "message": "For Jenkins scripts it is good practice to use ${WORKSPACE} instead of /tmp, among other things ${WORKSPACE} gets refreshed every time job runs.",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4adbf9b4_fea01205",
        "filename": "jjb/integration/integration-configure-clustering.sh",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 2264
      },
      "writtenOn": "2018-02-01T22:56:07Z",
      "side": 1,
      "message": "does this work? I didn\u0027t think this file would be available unless we do that prepend trick in the builder\nlogic.",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 47
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4dacc196_c60efba3",
        "filename": "jjb/integration/integration-configure-clustering.sh",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T16:11:12Z",
      "side": 1,
      "message": "file is available in Jenkins robot VM because it is copied there before being sent to other VMs.",
      "parentUuid": "4adbf9b4_fea01205",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 47
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8da238c4_22ffba94",
        "filename": "jjb/integration/integration-configure-clustering.sh",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:50:19Z",
      "side": 1,
      "message": "yeah it is prepended and works fine",
      "parentUuid": "4dacc196_c60efba3",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 47
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "344cc9f2_799b685b",
        "filename": "jjb/integration/integration-deploy-controller-run-test.sh",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 2264
      },
      "writtenOn": "2018-02-01T22:56:07Z",
      "side": 1,
      "message": "i like this idea. something we need, even if this patch doesn\u0027t go in. I\u0027m always confused to which EOF I\u0027m\nlooking at.",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 50
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68d7e892_ca45b801",
        "filename": "jjb/integration/integration-deploy-controller-run-test.sh",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:52:37Z",
      "side": 1,
      "message": "haha, yeah I was constantly getting lost in this file. Note you can\u0027t add the comment to the EOF line. bash looks for EOF on a single line by itself, so it never finds the end of the HERE doc.\n\nI will add this to the other scripts also.",
      "parentUuid": "344cc9f2_799b685b",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 50
      },
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d02aefc_94b089f0",
        "filename": "jjb/integration/integration-macros.yaml",
        "patchSetId": 5
      },
      "lineNbr": 442,
      "author": {
        "id": 797
      },
      "writtenOn": "2018-02-02T16:11:12Z",
      "side": 1,
      "message": "Please document macros, just few words what the below does.",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44272b3d_82820ddd",
        "filename": "jjb/integration/integration-macros.yaml",
        "patchSetId": 5
      },
      "lineNbr": 442,
      "author": {
        "id": 773
      },
      "writtenOn": "2018-02-02T16:50:19Z",
      "side": 1,
      "message": "Yes, I will add that.",
      "parentUuid": "2d02aefc_94b089f0",
      "revId": "b6739f5f904445d1dfa9fe14a5184bc2341000e6",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}