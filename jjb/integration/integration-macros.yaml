- parameter:
    name: integration-bundleurl
    parameters:
        - string:
            name: BUNDLEURL
            default: 'http://nexus.opendaylight.org/content/repositories/opendaylight.release/org/opendaylight/integration/distribution-karaf/0.2.0-Helium/distribution-karaf-0.2.0-Helium.zip'
            description: 'URL to karaf-distribution zip'

- parameter:
    name: integration-controller-features
    parameters:
        - string:
            name: CONTROLLERFEATURES
            default: '{controller-features}'
            description: |
                Features to install in the controller

                This is a comma seperated list of karaf features that
                should be installed. This list will be passed to the
                "featuresBoot=" parameter in the config file.

- parameter:
    name: integration-controller-memory
    parameters:
        - string:
            name: CONTROLLER_MEMORY
            default: '{controller-memory}'
            description: 'setting the JAVA_MAX_MEM'

- parameter:
    name: integration-controller-allfeatures
    parameters:
        - bool:
            name: ALL_FEATURES
            default: '{controller-all}'
            description:  'load up up the odl-integration-compatible-with-all feature'

- parameter:
    name: integration-test-suite
    parameters:
        - string:
            name: TEST_SUITE
            default: '{test-suite}'
            description:  'which test suite we should run'

- wrapper:
    name: integration-jclouds-controller-mininet
    wrappers:
      - jclouds:
          instances:
            - rk-c-el6-java:
                cloud-name: 'Rackspace DFW - Integration'
                count: 1
                stop-on-terminate: False
            - rk-c-el6-mininet:
                cloud-name: 'Rackspace DFW - Integration'
                count: 1
                stop-on-terminate: False

#################
# Shell Scripts #
#################

- builder:
    name: integration-get-slave-addresses
    builders:
        - shell:
            !include-raw include-raw-integration-get-slave-addresses.sh

- builder:
    name: integration-deploy-controller-compatible-min
    builders:
        - shell:
            !include-raw include-raw-integration-deploy-controller-min.sh

- builder:
    name: run-robot
    builders:
        - shell:
            !include-raw robot.sh

##############
# Publishers #
##############

- publisher:
    name: integration-robot
    publishers:
        - robot:
            output-path: ''
            other-files: ''
            unstable-threshold: 97.0
            pass-threshold: 100.0
            only-critical: false
