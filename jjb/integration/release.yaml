- project:
    name: integration-test-release
    jobs:
        - 'integration-{stream}-test-release'

    # stream:    branch with - in place of / (eg. stable-helium)
    # branch:    branch (eg. stable/helium)
    stream:
        - master:
            branch: 'master'
        - stable-helium:
            branch: 'stable/helium'

- job-template:
    name: 'integration-{stream}-test-release'

    # Job template for ODL Integration Release Tests
    #
    # Required Variables:
    #     stream:    branch with - in place of / (eg. stable-helium)
    #     branch:    branch (eg. stable/helium)

    disabled: true  # Disable until we're ready to migrate
    project-type: freestyle
    node: dynamic_verify

    logrotate:
        daysToKeep: '{build-days-to-keep}'
        numToKeep: '{build-num-to-keep}'
        artifactDaysToKeep: '{build-artifact-days-to-keep}'
        artifactNumToKeep: '{build-artifact-num-to-keep}'

    parameters:
        - bundleurl

    builders:
        - trigger-builds:
            - project: 'integration-master-csit-compatible-min'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

        - trigger-builds:
            - project: 'integration-master-csit-compatible-all'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

        - trigger-builds:
            - project: 'integration-master-csit-l2switch-only'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

        - trigger-builds:
            - project: 'integration-master-csit-l2switch-all'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

        - trigger-builds:
            - project: 'integration-master-csit-vtn-only'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

        - trigger-builds:
            - project: 'integration-master-csit-vtn-all'
              block: true
              predefined-parameters:
                  BUNDLEURL=$BUNDLEURL

    publishers:
        - email-notification:
            email-prefix: '[integration]'
