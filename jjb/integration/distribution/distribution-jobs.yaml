---
- project:
    name: distribution
    jobs:
      # gerrit- is generic template, distribution- is project specific.
      - 'distribution-sanity-{stream}'
      - gerrit-maven-clm
      - gerrit-maven-verify-dependencies
      - gerrit-tox-verify
      - '{project-name}-rtd-jobs':
          project-pattern: integration/distribution
          rtd-build-url: https://readthedocs.org/api/v2/webhook/opendaylight-distribution/34591/
          rtd-token: 6247e7a21158a20b207470b8bf7719c676ff8944

    project: integration/distribution
    project-name: distribution
    mvn-settings: integration-distribution-settings
    mvn-goals: 'clean install dependency:tree -DoutputFile=dependency_tree.txt'
    mvn-opts: '-Xmx1024m -XX:MaxPermSize=256m'
    email-upstream: '[int/dist]'
    stream:
      - fluorine:
          branch: 'master'
          karaf-version: odl
          # Self-Managed projects repos and features:
          sm-repos: >
            mvn:org.opendaylight.sxp/features-sxp//xml/features,
            mvn:org.opendaylight.unimgr/features4-unimgr//xml/features
          sm-features: >
            odl-sxp-routing,
            odl-unimgr-rest
      - oxygen:
          branch: 'stable/oxygen'
          karaf-version: karaf4

- project:
    name: distribution-managed
    jobs:
      # gerrit- is generic template, distribution- is project specific.
      - 'distribution-merge-{type}-{stream}'
      - 'distribution-verify-{type}-{stream}'
      - 'distribution-check-{type}-{stream}'
      - 'distribution-csit-managed-{stream}'

    project: integration/distribution
    project-name: distribution
    mvn-settings: integration-distribution-settings
    mvn-goals: 'clean install dependency:tree -DoutputFile=dependency_tree.txt'
    mvn-opts: '-Xmx1024m -XX:MaxPermSize=256m'
    email-upstream: '[int/dist]'
    type: managed
    profile: '-Pmanaged'
    forbidden-files: 'opendaylight/**'
    karaf-version: karaf4

    stream:
      - fluorine:
          branch: 'master'
          dependencies: >
              aaa-merge-{stream},
              bgpcep-merge-{stream},
              coe-merge-{stream},
              controller-merge-{stream},
              daexim-merge-{stream},
              genius-merge-{stream},
              infrautils-merge-{stream},
              lispflowmapping-merge-{stream},
              mdsal-merge-{stream},
              netconf-merge-{stream},
              netvirt-merge-{stream}
              neutron-merge-{stream},
              openflowplugin-merge-{stream},
              ovsdb-merge-{stream},
              serviceutils-merge-{stream},
              sfc-merge-{stream}

      - oxygen:
          branch: 'stable/oxygen'
          dependencies: >
              aaa-merge-{stream},
              alto-merge-{stream},
              bgpcep-merge-{stream},
              bier-merge-{stream},
              coe-merge-{stream},
              controller-merge-{stream},
              daexim-merge-{stream},
              dluxapps-merge-{stream},
              dlux-merge-{stream},
              faas-merge-{stream},
              genius-merge-{stream},
              groupbasedpolicy-merge-{stream},
              infrautils-merge-{stream},
              jsonrpc-merge-{stream},
              l2switch-merge-{stream},
              lispflowmapping-merge-{stream},
              mdsal-merge-{stream},
              nemo-merge-{stream},
              netconf-merge-{stream},
              netvirt-merge-{stream},
              neutron-merge-{stream},
              of-config-merge-{stream},
              openflowplugin-merge-{stream},
              ovsdb-merge-{stream},
              p4plugin-merge-{stream},
              packetcable-merge-{stream},
              serviceutils-merge-{stream},
              sfc-merge-{stream},
              snmp4sdn-merge-{stream},
              snmp-merge-{stream},
              sxp-merge-{stream},
              tsdr-merge-{stream},
              usc-merge-{stream},
              vbd-merge-{stream}

- project:
    name: distribution-full
    jobs:
      # gerrit- is generic template, distribution- is project specific.
      - 'distribution-merge-{type}-{stream}'
      - 'distribution-verify-{type}-{stream}'
      - 'distribution-check-{type}-{stream}'

    project: integration/distribution
    project-name: distribution
    mvn-settings: integration-distribution-settings
    mvn-goals: 'clean install dependency:tree -DoutputFile=dependency_tree.txt'
    mvn-opts: '-Xmx1024m -XX:MaxPermSize=256m'
    email-upstream: '[int/dist]'
    type: full
    profile: '-Punmanaged'
    files: 'opendaylight/**'
    karaf-version: odl

    stream:
      - fluorine:
          branch: 'master'
          karaf-version: odl
          dependencies: >
              distribution-merge-managed-{stream},
              sxp-merge-{stream},
              unimgr-merge-{stream}

- project:
    name: distribution-sonar
    jobs:
      - gerrit-maven-sonar

    project: integration/distribution
    project-name: distribution
    branch: master
    mvn-settings: integration-distribution-settings
    mvn-goals: clean install dependency:tree -DoutputFile=dependency_tree.txt
    mvn-opts: '-Xmx1024m -XX:MaxPermSize=256m'

- view:
    name: distribution
    description: 'List of distribution jobs'
    regex: '^(integration-)?distribution-.*'
    <<: *releng_view_common
