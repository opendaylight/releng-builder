---
- packaging_common:
    &packaging_common # values apply to all packaging docker projects
    name: packaging-common
    # git repo
    project: integration/packaging
    # jenkins job name prefix
    project-name: packaging
    # maven settings file has docker credentials
    mvn-settings: packaging-settings
    # source of docker tag
    container-tag-method: yaml-file
    # build node
    build-node: centos7-docker-4c-4g

- project:
    <<: *packaging_common
    name: packaging-docker
    docker-name: "opendaylight/opendaylight"
    docker-root: "$WORKSPACE/odl-docker"
    docker-build-args: "--network=host"
    pre_docker_build_script: "$WORKSPACE/odl-docker/install_docker.sh"
    container-public-registry: nexus3.opendaylight.org:10001
    container-push-registry: nexus3.opendaylight.org:10003
    gerrit_trigger_file_paths:
      - compare-type: REG_EXP
        pattern: "odl-docker/.*"
    jobs:
      - "{project-name}-gerrit-docker-jobs"
    stream:
      - silicon:
          branch: stable/silicon

- project:
    <<: *packaging_common
    name: packaging-release
    jobs:
      - "{project-name}-gerrit-release-jobs"

- project:
    name: packaging-view
    views:
      - project-view
    project-name: packaging
