---
- project:
    name: autorelease-projects
    jobs:
      - 'autorelease-generate-release-notes-{stream}'
      - 'autorelease-release-{stream}'
      - 'autorelease-update-validate-jobs-{stream}'
      - 'autorelease-version-bump-{stream}'
      - '{project-name}-validate-autorelease-{stream}'

    stream:
      - nitrogen:
          # todo: After boron EOL remove next-release-tag and directy pass
          # '{stream}' to autorelease-release-tag parameter
          next-release-tag: '{stream}'
          branch: 'master'
          jdk: 'openjdk8'
          integration-test: nitrogen
      - carbon:
          next-release-tag: '{stream}'
          branch: 'stable/carbon'
          jdk: 'openjdk8'
          integration-test: carbon
          karaf-version: karaf3
          extra-mvn-opts: -Dskip.karaf4.featureTest=true
      - boron:
          # Only run once a week since Boron is in maintenance mode
          cron: 'H H * * 0'
          next-release-tag: Boron-SR5
          branch: 'stable/boron'
          jdk: 'openjdk8'
          integration-test: boron
          karaf-version: karaf3

    project: releng/autorelease
    project-name: autorelease
    archive-artifacts: >
        **/*.prop
        **/*.log
        error.log.gz
