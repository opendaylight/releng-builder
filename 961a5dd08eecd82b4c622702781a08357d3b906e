{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_b7db551a",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1723
      },
      "writtenOn": "2017-02-02T17:49:19Z",
      "side": 1,
      "message": "Not sure if we want to do this via vagrant-opendaylight or not. Definitely an option, but could also install ansible-opendaylight via direct call to `ansible-galaxy` (vs using requirements.yml via cloned repo). Would then need to create a playbook and invoke ansible-odl to install ODL with it. Really not sure what the best route is. Kinda nice to have pristine, isolated VM for ODL install, but kinda nice to not stand up an additional VM.",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_dee09f98",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 6047
      },
      "writtenOn": "2017-02-08T07:52:43Z",
      "side": 1,
      "message": "Makes sense to not have an additional VM. I have submitted a PR (https://github.com/dfarrell07/ansible-opendaylight/pull/31), adding requirements.yml file to install opendaylight role.",
      "parentUuid": "fafc7978_b7db551a",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_adddab72",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1723
      },
      "writtenOn": "2017-02-08T23:42:49Z",
      "side": 1,
      "message": "Okay, thanks. PR is merged. You\u0027ll need to clone the ansible repo to run linting and other tests, so good to have an example requirements.yml there already. Can refactor this to clone ansible-opendaylight, install the role and install ODL. Also would be good to run linting via tox. Will need to change the venv name and install into it via ansible-opendaylight/requirements.txt. This feedback applies to the RPM as well.",
      "parentUuid": "fafc7978_dee09f98",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_eb8e3878",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 6047
      },
      "writtenOn": "2017-02-24T09:10:20Z",
      "side": 1,
      "message": "I cloned ansible-opendaylight, installed the role and when I run the `ansible-playbook` command, I get:\n\n [WARNING]: provided hosts list is empty, only localhost is available\n\nConsole output for the `packaging-test-ansible-rpm-master` jenkins job: https://jenkins.opendaylight.org/sandbox/job/packaging-test-ansible-rpm-master/1/console.\n\nThis is probably because we are not using the vagrant box? If yes, what should I add as host?",
      "parentUuid": "fafc7978_adddab72",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5cc90cab",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1723
      },
      "writtenOn": "2017-02-24T18:39:19Z",
      "side": 1,
      "message": "Humm, I haven\u0027t seen this before.\n\nThis seems to happen when there isn\u0027t an /etc/ansible/hosts, which would be true in our case I guess.\n\nhttps://github.com/ansible/ansible/issues/6442\n\nI guess we need to pass an inventory of the hosts we care about (localhost?) to Ansible via an inventory file to -i (or directly to -i, skipping file?).\n\nhttp://docs.ansible.com/ansible/intro_inventory.html\n\nhttps://groups.google.com/forum/#!msg/ansible-project/G_9JRGp5jGE/PTBZdgDb5OEJ",
      "parentUuid": "fafc7978_eb8e3878",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_de21714e",
        "filename": "jjb/packaging/include-raw-test-ansible-deb.sh",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 6047
      },
      "writtenOn": "2017-02-25T15:18:23Z",
      "side": 1,
      "message": "As you said, there are two methods - adding a hosts file or using -i. We can add a `hosts` file in ansible-opendaylight with the content:\n\n  [base]\n  localhost ansible_connection\u003dlocal\n\nand execute:\n\n  $ sudo ansible-playbook -i hosts examples/odl_4_testing_playbook.yml\n\nor directly pass the localhost:\n\n  $ sudo ansible-playbook -i \"localhost,\" -c local examples/odl_4_testing_playbook.yml\n\nI tested for the latter. Which do you prefer?\n\nThe jenkins job `packaging-test-ansible-rpm-master` is successful (https://jenkins.opendaylight.org/sandbox/job/packaging-test-ansible-rpm-master/1/console). \n\nHowever, for `packaging-test-ansible-deb-master`, one of the tasks fails:\n\n\n  TASK [opendaylight : Open ODL NB REST port via FirewallD]\n  fatal: [localhost]: FAILED! \u003d\u003e {\"failed\": true, \"msg\": \"The conditional check \u0027in_container.rc \u003d\u003d 1 and firewalld_status.stdout \u003d\u003d \u0027active\u0027\u0027 failed. The error was: error while evaluating conditional (in_container.rc \u003d\u003d 1 and firewalld_status.stdout \u003d\u003d \u0027active\u0027): \u0027dict object\u0027 has no attribute \u0027stdout\u0027\\n\\nThe error appears to have been in \u0027/etc/ansible/roles/opendaylight/tasks/open_nb_rest_port.yml\u0027: line 11, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: Open ODL NB REST port via FirewallD\\n  ^ here\\n\"}\n  to retry, use: --limit @/w/workspace/packaging-test-ansible-deb-master/ansible-opendaylight/examples/deb_repo_install_playbook.retry\n\nThis is similar to https://github.com/ansible/ansible/issues/21233.\n\nI see no error in my Ubuntu xenial 64 VM:\n\n  $ ansible --version\n  ansible 2.2.1.0\n    config file \u003d /etc/ansible/ansible.cfg\n    configured module search path \u003d Default w/o overrides",
      "parentUuid": "fafc7978_5cc90cab",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_7cafb02a",
        "filename": "jjb/packaging/include-raw-test-ansible-rpm.sh",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-02-25T03:40:51Z",
      "side": 1,
      "message": "what is the convention for deb vs rpm scripts - make comparable scripts or try to use the same for both distros? These two files are exactly the same except yum or apt-get.",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_5ed5cfb7",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 6258
      },
      "writtenOn": "2017-02-08T07:52:36Z",
      "side": 1,
      "message": "we don\u0027t use dynamic_verify label anymore this has to be changed to appropriate label which gives details of the platform-cpus-memory.",
      "range": {
        "startLine": 206,
        "startChar": 10,
        "endLine": 206,
        "endChar": 24
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_2dea5b0f",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 1723
      },
      "writtenOn": "2017-02-08T23:42:49Z",
      "side": 1,
      "message": "We (Int/Pack) have other instances of this we need to update. Do you have some docs on the new format we can use to refactor our other jobs?https://trello.com/c/kTmGxLfL/445-update-jjb-node-labels-to-new-style",
      "parentUuid": "fafc7978_5ed5cfb7",
      "range": {
        "startLine": 206,
        "startChar": 10,
        "endLine": 206,
        "endChar": 24
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_0d30379d",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 6258
      },
      "writtenOn": "2017-02-09T00:40:24Z",
      "side": 1,
      "message": "We have recently updated the docs and some of the jobs which were using older label.  http://docs.opendaylight.org/en/latest/submodules/releng/builder/docs/jenkins.html#pool-odlrpc \nWe still need to remove `ubuntu_mininet` and update the jobs to  use `ubuntu-trusty-mininet-2c-2g` since its more readable.",
      "parentUuid": "fafc7978_2dea5b0f",
      "range": {
        "startLine": 206,
        "startChar": 10,
        "endLine": 206,
        "endChar": 24
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_13c5f53b",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 1723
      },
      "writtenOn": "2017-02-09T17:17:48Z",
      "side": 1,
      "message": "Cool, so I guess we want centos7-robot-2c-2g here",
      "parentUuid": "fafc7978_0d30379d",
      "range": {
        "startLine": 206,
        "startChar": 10,
        "endLine": 206,
        "endChar": 24
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_ccc9077a",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 6258
      },
      "writtenOn": "2017-02-11T02:28:45Z",
      "side": 1,
      "message": "I think it should be centos7-java-builder-2c-4g since dynamic_verify are label for centos7 java builder nodes.",
      "parentUuid": "fafc7978_13c5f53b",
      "range": {
        "startLine": 206,
        "startChar": 10,
        "endLine": 206,
        "endChar": 24
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_dca85c22",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 322,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-02-25T03:40:51Z",
      "side": 1,
      "message": "same comment, but you could have a single template with variable distro for rpm or deb choices.",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_be1e2d0a",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 322,
      "author": {
        "id": 6047
      },
      "writtenOn": "2017-02-25T15:18:23Z",
      "side": 1,
      "message": "We can have a single job template, say `\u0027packaging-test-ansible-deb-{stream}` that uses a script say `include-raw-test-ansible.sh` which checks the OS and uses either `apt-get` or `yum`.\n\nhttps://jenkins.opendaylight.org/sandbox/job/packaging-test-ansible-master/",
      "parentUuid": "fafc7978_dca85c22",
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_fe1435ea",
        "filename": "jjb/packaging/packaging.yaml",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 6047
      },
      "writtenOn": "2017-02-25T15:18:23Z",
      "side": 1,
      "message": "Is it possible to run a single job on two nodes (in this case: `ubuntu-trusty-mininet-2c-2g` and `centos7-java-builder-2c-4g`)?\n\nI went through the documentation: https://docs.openstack.org/infra/jenkins-job-builder/definition.html?highlight\u003dnode#job\nand it seems that we can have multiple nodes but it\u0027s an \u0027or\u0027:\n\n  node: centos7-java-builder-2c-4g || ubuntu-trusty-mininet-2c-2g\n\nI guess we want \u0027\u0026\u0026\u0027. How can we do this?",
      "range": {
        "startLine": 324,
        "startChar": 4,
        "endLine": 324,
        "endChar": 37
      },
      "revId": "961a5dd08eecd82b4c622702781a08357d3b906e",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}