{
  "comments": [
    {
      "key": {
        "uuid": "fafc7978_c9dc5915",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 2264
      },
      "writtenOn": "2017-02-10T22:20:02Z",
      "side": 1,
      "message": "Thanh told me he\u0027s seen some stacks take almost this\nlong. but now with 3 retries I wanted to trim this down\nto help mitigate our worst case scenario (which is now\n30m) of spinning our wheels.",
      "range": {
        "startLine": 13,
        "startChar": 11,
        "endLine": 13,
        "endChar": 13
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_c94a99c4",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 6258
      },
      "writtenOn": "2017-02-10T22:57:27Z",
      "side": 1,
      "message": "I think `OS_RETRIES` and `OS_TIMEOUT` are essential the same. Could we not do with increasing the OS_TIMEOUT to 30 instead ? \nMaybe 1-minute polling  is not very efficient, since its take longer. Would increase the sleep to 90s or 120s help ?",
      "parentUuid": "fafc7978_c9dc5915",
      "range": {
        "startLine": 13,
        "startChar": 11,
        "endLine": 13,
        "endChar": 13
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_e9167da6",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 2264
      },
      "writtenOn": "2017-02-10T22:59:27Z",
      "side": 1,
      "message": "the idea of this patch is to retry a whole NEW stack when\nthere is trouble.\n\ntrouble \u003d took too long -or- CREATE FAILED -or- Unexpected Status",
      "parentUuid": "fafc7978_c94a99c4",
      "range": {
        "startLine": 13,
        "startChar": 11,
        "endLine": 13,
        "endChar": 13
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_097b01f6",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 773
      },
      "writtenOn": "2017-02-10T23:14:22Z",
      "side": 1,
      "message": "add try in the output, blah blah, try: 1",
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_69cd6d5d",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 2264
      },
      "writtenOn": "2017-02-10T22:20:02Z",
      "side": 1,
      "message": "will it be a problem that we are going to re-use the same \nname when doing a retry? \n\none case could be that the current stack is IN_PROGRESS for\nlonger than our OS_TIMEOUT so we give up and then try to\ncreate a new stack with the same name.\n\nI know we were told to *not* delete stacks with *PROGRESS*\nstatus, so we can\u0027t do that.",
      "range": {
        "startLine": 26,
        "startChar": 85,
        "endLine": 26,
        "endChar": 96
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_a9ee35b2",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 2264
      },
      "writtenOn": "2017-02-10T22:39:00Z",
      "side": 1,
      "message": "after re-reading this status email [0], I realize this\nprobably is problematic. will think about it and hopefully\npush some kind of update\n\n[0] https://lists.opendaylight.org/pipermail/integration-dev/2017-February/009143.html",
      "parentUuid": "fafc7978_69cd6d5d",
      "range": {
        "startLine": 26,
        "startChar": 85,
        "endLine": 26,
        "endChar": 96
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_cc78e7f4",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 2759
      },
      "writtenOn": "2017-02-11T05:02:27Z",
      "side": 1,
      "message": "Yes, reusing the same name is problematic. However if the the state is CREATE_FAILED than it is safe to run a delete and then restart.\n\nI spent a lot of time investigating our failed builds today and believe the the most common failure case by far is not actually timeouts. It\u0027s CREATE_FAILED.\n\nSo I think there\u0027s 2 retry scenarios we need to handle and the CREATE_FAILED on is the easiest to handle and also our most common one. I say we can split this task into 2 parts.\n\n1) Handle CREATE_FAILED by retrying and deleting\n\n2) Handle timeout by retrying but somehow being able to track a different STACK_NAME, need to think more about this one\n\nAs for Unexpected status I think we should just fail because we don\u0027t know what to do with this status since we are unsure what the state of the stack is in. If we do run into this then we can investigate why and perhaps add a new known status handler if we can understand it.",
      "parentUuid": "fafc7978_a9ee35b2",
      "range": {
        "startLine": 26,
        "startChar": 85,
        "endLine": 26,
        "endChar": 96
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_e9e15dd1",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 2264
      },
      "writtenOn": "2017-02-10T22:17:09Z",
      "side": 1,
      "message": "here is the only exit, but notice the only way to be \nsuccessful is to flip the STACK_SUCCESSFUL bool up in\nline 31",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 58,
        "endChar": 2
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fafc7978_a94595b4",
        "filename": "jjb/opendaylight-infra-stack.sh",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 6258
      },
      "writtenOn": "2017-02-10T22:57:27Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "fafc7978_e9e15dd1",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 58,
        "endChar": 2
      },
      "revId": "c447b7949d2430788b1dded40ffa69c311fd9872",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}